function close_calculator(){	Minimizer.close("calculator");}	function minimize_calculator(){    Minimizer.minimize("calculator");}	function maximize_calculator(){    Minimizer.maximize("calculator");}			function init_calculator(){	$("#body-calculator").keypress(function(event) {	}).mouseover(function(){        $("#calculator-container").draggable({disabled:true});        document.getSelection().removeAllRanges();    }).mouseout(function(){        $("#calculator-container").draggable({disabled:false});    });		$("#calculator-container").mousedown(function(){		Focus.set("calculator");		setMenu_calculator();			fixSizecalculatorSpeed = 0;	})	.mouseup(function(){		fixSizecalculatorSpeed = 500;	});		$("#exit-calculator").click(function(){		close_calculator();		$("#body-calculator").val("");	});	$("#maximize-calculator").click(function(){		maximize_calculator()	});		$("#minimize-calculator").click(function(){		minimize_calculator()	});			var openedMenu = false;	$("#calculator-top-menu" ).mousedown(function(){		if(!openedMenu){			$("#calculator-top-menu" ).css({"background" : "#000"});			$(".menu").css({"visibility" : "visible"});							openedMenu = true;		} else {			$("#calculator-top-menu" ).css({"background" : "#6EBC24"});			$(".menu" ).css({"visibility" : "hidden"});	 			openedMenu = false;						}	});        $("#calculator-button1").mousedown(function(){        AppCalc.Button1_click();    });    $("#calculator-button2").mousedown(function(){        AppCalc.Button2_click();    });    $("#calculator-button3").mousedown(function(){        AppCalc.Button3_click();    });    $("#calculator-button4").mousedown(function(){        AppCalc.Button4_click();    });    $("#calculator-button5").mousedown(function(){        AppCalc.Button5_click();    });    $("#calculator-button6").mousedown(function(){        AppCalc.Button6_click();    });    $("#calculator-button7").mousedown(function(){        AppCalc.Button7_click();    });    $("#calculator-button8").mousedown(function(){        AppCalc.Button8_click();    });    $("#calculator-button9").mousedown(function(){        AppCalc.Button9_click();    });    $("#calculator-button10").mousedown(function(){        AppCalc.Button0_click();    });    $("#calculator-button11").mousedown(function(){        AppCalc.ButtonDecimal_click();    });    $("#calculator-button12").mousedown(function(){        AppCalc.ButtonSigned_click();    });    $("#calculator-button13").mousedown(function(){        AppCalc.ButtonPlus_click();    });    $("#calculator-button14").mousedown(function(){        AppCalc.ButtonMin_click();    });    $("#calculator-button15").mousedown(function(){        AppCalc.ButtonMultiply_click();    });    $("#calculator-button16").mousedown(function(){        AppCalc.ButtonDivide_click();    });    $("#calculator-button17").mousedown(function(){        AppCalc.ButtonEqual_click();    });    $("#calculator-button21").mousedown(function(){        AppCalc.ButtonClear_click();    });    $("#calculator-button22").mousedown(function(){        AppCalc.ButtonClearEnd_click();    });    	fixSizecalculator();}var fixSizecalculatorSpeed = 500;function fixSizecalculator(){	setTimeout(function(){		if(["calculator"].state == "opened"){			$height = $("#calculator-container").height();			$width = $("#calculator-container").width();			$("#body-calculator").css({"height" : $height-45, "width" : $width-5});		}		fixSizecalculator();	},fixSizecalculatorSpeed);}function setMenu_calculator(){	proIdApps = "calculator";	var valMenu = "<span id=top-menu-item0 class=top-menu-item>Calculator</span>"+        "<ul id=top-menu-item0-down class=top-menu-item-down>"+            "<li onclick=minimize_calculator(proIdApps)>Minimize</li>"+			"<li onclick=maximize_calculator(proIdApps)>Maximize</li>"+			"<li onclick=close_calculator(proIdApps)>Quit Calculator</li>"+        "</ul>";		$("#top-menu").html(valMenu);		Menu.fixedTopMenu();}function register_calculator(){	$.post("system/applications/calculator/layout/calculator.html", function(data){		ApplicationRun[applicationOpened] = data;		ApplicationRun[applicationOpened] = ApplicationRun[applicationOpened];		$(".program").html(($(".program").html())+ApplicationRun[applicationOpened]);		setTimeout(init_calculator,100);		fixSizecalculator();		applicationOpened++;	});	}var currentDir = "";function run_calculator(dir, fileName){	$(".application-container").css({"z-index":0});	$("#calculator-container").css({"z-index":99});	fileName = dirReplace(fileName);	currentDir = dir;	$.post("system/kernel/file/ReadFile.php", {"dir" : dir}, function(data){		$("#body-calculator").val(data);		$("#application-name").html("calculator - " + fileName);	});}function open_calculator(){    }function AppCalculator(){    this.Button1_click = function(){        $("#calculator-textbox1").append("1");    }    this.Button2_click = function(){        $("#calculator-textbox1").append("2");    }    this.Button3_click = function(){        $("#calculator-textbox1").append("3");    }    this.Button4_click = function(){        $("#calculator-textbox1").append("4");    }    this.Button5_click = function(){        $("#calculator-textbox1").append("5");    }    this.Button6_click = function(){        $("#calculator-textbox1").append("6");    }    this.Button7_click = function(){        $("#calculator-textbox1").append("7");    }    this.Button8_click = function(){        $("#calculator-textbox1").append("8");    }    this.Button9_click = function(){        $("#calculator-textbox1").append("9");    }    this.Button0_click = function(){        $("#calculator-textbox1").append("0");    }    this.ButtonDecimal_click = function(){        $("#calculator-textbox1").append(".");    }    this.ButtonSigned_click = function(){            }    this.ButtonPlus_click = function(){        val = $("#calculator-textbox1").html();        if(val[val.length-1] == "-" || val[val.length-1] == "x" || val[val.length-1] == "/")            $("#calculator-textbox1").html(val.substr(0, val.length-1)+"+");        else if(val[val.length-1] != "+" && val.length > 0)            $("#calculator-textbox1").append("+");    }    this.ButtonMin_click = function(){        val = $("#calculator-textbox1").html();        if(val.length > 0){            if(!isNaN(val[val.length-1]))                $("#calculator-textbox1").append("-");            else if(val[val.length-2] == "+" || val[val.length-2] == "x" || val[val.length-2] == "/")                $("#calculator-textbox1").html(val.substr(0, val.length-1)+"-");            else if(val[val.length-2] != "-" || (!isNaN(val[val.length-1])))                $("#calculator-textbox1").append("-");        } else {            $("#calculator-textbox1").append("-");        }    }    this.ButtonMultiply_click = function(){        val = $("#calculator-textbox1").html();        if(val[val.length-1] == "-" || val[val.length-1] == "+" || val[val.length-1] == "/")            $("#calculator-textbox1").html(val.substr(0, val.length-1)+"x");        else if(val[val.length-1] != "x" && val.length > 0)           $("#calculator-textbox1").append("x");    }    this.ButtonDivide_click = function(){        val = $("#calculator-textbox1").html();        if(val[val.length-1] == "-" || val[val.length-1] == "+" || val[val.length-1] == "x")            $("#calculator-textbox1").html(val.substr(0, val.length-1)+"/");        else if(val[val.length-1] != "/" && val.length > 0)            $("#calculator-textbox1").append("/");    }    this.ButtonEqual_click = function(){        AppCalc.Calculate();    }    this.ButtonClear_click = function(){        var val = $("#calculator-textbox1").html();        var len = val.length;        $("#calculator-textbox1").html(val.substr(0,len-1));    }    this.ButtonClearEnd_click = function(){        $("#calculator-textbox1").html("");    }        this.Calculate = function(){        text = $("#calculator-textbox1").html();        text = text.replace(/&nbsp;/g, "")+")";                //alert(text);        var Top = -1;        var TopP = -1;        var Stack = [];        var StackP = [];                function kosong(){            if(Top == -1)                return true;            else                return false;        }                function penuh(){            if(Top == 200)                return true;            else                return false;        }                function push(Element){            if(!penuh()){                Top++;                Stack[Top] = Element;            }        }                function pop(){            if(!kosong()){                res = Stack[Top];                Top--;                return res;            }        }                function kosongP(){            if(TopP == -1)                return true;            else                return false;        }                function penuhP(){            if(TopP == 200)                return true;            else                return false;        }                function pushP(Element){            if(!penuhP()){                TopP++;                StackP[TopP] = Element;            }        }                function popP(){            if(!kosongP()){                res = StackP[TopP];                TopP--;                return res;            }        }                function toInfix(){            var tNumber = "";            push("(");            for(i=0;i<text.length;i++){                if(text[i] == "-" && (i == 0 || (text[i-1] == "+" || text[i-1] == "-" || text[i-1] == "x" || text[i-1] == "/"))){                    tNumber += text[i];                }                else if(((text[i] == "+") || (text[i] == "-") || (text[i] == "x") || (text[i] == "/") || (text[i] == "(") || (text[i] == ")"))&&                (((text[i] == "+") && (Stack[Top] == "+" || Stack[Top] == "-" || Stack[Top] == "x" || Stack[Top] == "/")) ||                 ((text[i] == "-") && (Stack[Top] == "+" || Stack[Top] == "-" || Stack[Top] == "x" || Stack[Top] == "/")) ||                 ((text[i] == "x") && (Stack[Top] == "x" || Stack[Top] == "/")) ||                ((text[i] == "/") && (Stack[Top] == "x" || Stack[Top] == "/")))){                    if(tNumber.length > 0){                        pushP(parseFloat(tNumber));                        tNumber = "";                    }                    pushP(pop());                    push(text[i]);                } else if(((text[i] == "+") || (text[i] == "-") || (text[i] == "x") || (text[i] == "/") || (text[i] == "(") || (text[i] == ")"))&&                (((text[i] == "+") && (Stack[Top] == "(")) ||                ((text[i] == "-") && (Stack[Top] == "(")) ||                ((text[i] == "x") && (Stack[Top] == "(" || Stack[Top] == "+" || Stack[Top] == "-")) ||                 ((text[i] == "/") && (Stack[Top] == "(" || Stack[Top] == "+" || Stack[Top] == "-")))){                    if(tNumber.length > 0){                        pushP(parseFloat(tNumber));                        tNumber = "";                    }                    push(text[i]);                } else if(text[i] == ")"){                    if(tNumber.length > 0){                        pushP(parseFloat(tNumber));                        tNumber = "";                    }                    isPop = true;                    while(isPop){                        if(Stack[Top] != "("){                            TopP++;                            StackP[TopP] = pop();                        } else {                            isPop = false;                        }                    }                    push(text[i]);                } else {                    tNumber += text[i];                }            }        }                function getResult(){            toInfix();            pushP(")");            Top = -1;            result = 0;            isPop = true;            for(i=0;i<=TopP;i++){                val = StackP[i];				if(val == "+" || val == "-" || val == "x" || val == "/"){                    res = 0;                    var1 = parseFloat(pop());                    var2 = parseFloat(pop());                    switch(val){                        case "+":res = var2 + var1;break;                        case "-":res = var2 - var1;break;                        case "x":res = var2 * var1;break;                        case "/":res = var2 / var1;break;                    }                    push(parseFloat(res));                } else {                    if(val == ")"){                        result = parseFloat(pop());                        isPop = false;                        return result;                    } else {                        push(val);                    }                }            }        }        $("#calculator-textbox1").html(getResult());    }}var AppCalc = new AppCalculator();